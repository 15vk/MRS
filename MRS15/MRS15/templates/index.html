{% extends "base.html" %}

{% block title %}CineTrack - Home{% endblock %}

{% block styles %}
<style>
    .hero {
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://image.tmdb.org/t/p/original/wwemzKWzjKYJFfCeiB57q3r4Bcm.png');
        background-size: cover;
        background-position: center;
        color: white;
        padding: 80px 0;
        margin-bottom: 40px;
        border-radius: 10px;
    }
    
    .hero-text {
        max-width: 800px;
        margin: 0 auto;
        text-align: center;
    }
    
    .hero-text h1 {
        font-size: 3rem;
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    .hero-text p {
        font-size: 1.2rem;
        margin-bottom: 30px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }
    
    .search-container {
        position: relative;
        max-width: 600px;
        margin: 0 auto;
    }
    
    #search {
        width: 100%;
        padding: 15px 20px;
        font-size: 18px;
        border-radius: 30px;
        border: none;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    
    .search-btn {
        position: absolute;
        right: 5px;
        top: 5px;
        background: #e74c3c;
        color: white;
        border: none;
        border-radius: 30px;
        padding: 10px 20px;
        cursor: pointer;
        transition: background 0.3s;
    }
    
    .search-btn:hover {
        background: #c0392b;
    }
    
    .movie-list {
        margin-bottom: 50px;
    }
    
    .movie-list h2 {
        font-size: 2rem;
        margin-bottom: 20px;
        color: #2c3e50;
        border-left: 5px solid #e74c3c;
        padding-left: 15px;
    }
    
    .movie-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 25px;
    }
    
    .movie-box {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        transition: transform 0.3s, box-shadow 0.3s;
        cursor: pointer;
    }
    
    .movie-box:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }
    
    .movie-box img {
        width: 100%;
        height: 300px;
        object-fit: cover;
    }
    
    .movie-info {
        padding: 15px;
    }
    
    .movie-info h3 {
        font-size: 1rem;
        margin: 0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .movie-rating {
        color: #f39c12;
        margin-top: 5px;
    }
</style>
{% endblock %}

{% block content %}
    {% if 'user_id' in session %}
        <section class="hero">
            <div class="hero-text">
                <h1>Discover Your Next Favorite</h1>
                <p>Search thousands of movies and find perfect recommendations</p>
                <div class="search-container">
                    <input type="text" id="search" placeholder="Search for movies...">
                    <button class="search-btn" onclick="searchMovie()">Search</button>
                </div>
            </div>
        </section>
        <section class="movie-list">
            <h2>Trending This Week</h2>
            <div class="movie-grid" id="trending-movie-list">
                {% for movie in trending_movies %}
                    <div class="movie-box" onclick="openMovieDesc('{{ movie.id }}')">
                        <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }}">
                        <div class="movie-info">
                            <h3>{{ movie.title }}</h3>
                            <div class="movie-rating">
                                <i class="fas fa-star"></i> {{ movie.vote_average }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>
        <section class="movie-list">
            <h2>Suggested for You</h2>
            <div class="movie-grid" id="suggested-movie-list">
                {% for movie in suggested_movies %}
                    <div class="movie-box" onclick="openMovieDesc('{{ movie.id }}')">
                        <img src="https://image.tmdb.org/t/p/w500{{ movie.poster_path }}" alt="{{ movie.title }}">
                        <div class="movie-info">
                            <h3>{{ movie.title }}</h3>
                            <div class="movie-rating">
                                <i class="fas fa-star"></i> {{ movie.vote_average }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>
    {% else %}
        {% include 'login.html' %}
    {% endif %}
{% endblock %}

{% block scripts %}
<script>
    

    function openMovieDesc(movieId) {
        window.location.href = `/movie_desc/${movieId}`;
    }
    
    // Add event listener for Enter key in search box
    document.getElementById('search').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            searchMovie();
        }
    });
</script>
{% endblock %}
